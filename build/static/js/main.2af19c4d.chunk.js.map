{"version":3,"sources":["components/ContactSearch.js","components/ContactNew.js","components/Contact.js","components/ContactList.js","services/contact.js","components/Notification.js","App.js","index.js"],"names":["ContactSearch","props","type","onChange","event","handleInput","ContactNew","onSubmit","handleSubmit","handleContactInput","value","contactData","name","number","Contact","onClick","delete","ContactList","list","map","person","id","baseUrl","contactServices","getAll","axios","get","then","response","data","create","newObj","post","update","put","deleteContact","Notification","notification","message","replace","style","color","background","border","borderRadius","padding","fontSize","marginBottom","whiteSpace","App","existingContact","useState","persons","setPersons","setContactData","searchText","setSearchText","searchResults","setSearchResults","setNotification","useEffect","allContacts","regex","RegExp","filter","test","setTimeout","target","preventDefault","contact","some","obj2","obj1","toLowerCase","window","confirm","updatedContact","catch","error","newContact","concat","console","log","Object","getOwnPropertyNames","forEach","prop","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2af19c4d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst ContactSearch = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input type='text' onChange={(event) => props.handleInput(event)} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ContactSearch\r\n","import React from 'react'\r\n\r\nconst ContactNew = (props) => {\r\n  return (\r\n    <form onSubmit={(event) => props.handleSubmit(event)}>\r\n      <div>\r\n        name:\r\n        <input\r\n          type='text'\r\n          onChange={props.handleContactInput}\r\n          value={props.contactData.name}\r\n          name='name'\r\n        />\r\n      </div>\r\n      <div>\r\n        number:\r\n        <input\r\n          type='tel'\r\n          onChange={props.handleContactInput}\r\n          value={props.contactData.number}\r\n          name='number'\r\n        />\r\n      </div>\r\n      <button type='submit'>add</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ContactNew\r\n","import React from 'react'\r\n\r\nconst Contact = (props) => {\r\n  return (\r\n    <div>\r\n      {props.name} {props.number}\r\n      <button onClick={props.delete}>delete</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Contact\r\n","import React from 'react'\r\nimport Contact from './Contact'\r\n\r\nconst ContactList = (props) => {\r\n  return (\r\n    <div>\r\n      <h2>Numbers</h2>\r\n      {props.list.map((person) => (\r\n        <Contact\r\n          name={person.name}\r\n          number={person.number}\r\n          key={person.id}\r\n          delete={() => props.delete(person.id)}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ContactList\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then((response) => response.data)\r\n}\r\n\r\nconst create = (newObj) => {\r\n  const request = axios.post(baseUrl, newObj)\r\n  return request.then((response) => response.data)\r\n}\r\n\r\nconst update = (id, newObj) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObj)\r\n  return request.then((response) => response.data)\r\n}\r\n\r\nconst deleteContact = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst contactServices = { getAll, create, update, deleteContact }\r\n\r\nexport default contactServices\r\n","import React from 'react'\r\n\r\n// there are three types of notificatios - success, error and alert.\r\n\r\nconst Notification = ({ notification }) => {\r\n  //#region style definitions\r\n  const successNotification = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    border: '5px solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    fontSize: 20,\r\n    marginBottom: 15,\r\n    whiteSpace: 'pre-line',\r\n  }\r\n\r\n  const alertNotification = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    border: '5px solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    fontSize: 20,\r\n    marginBottom: 15,\r\n    whiteSpace: 'pre-line',\r\n  }\r\n  //#endregion\r\n\r\n  if (notification === null) return null\r\n  let { message, type } = notification\r\n\r\n  if (!message) return null\r\n  message = message.replace('.', '.\\n')\r\n  return (\r\n    <div style={type === 'success' ? successNotification : alertNotification}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from 'react'\nimport ContactSearch from './components/ContactSearch'\nimport ContactNew from './components/ContactNew'\nimport ContactList from './components/ContactList'\nimport contactServices from './services/contact'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  // #region state definitions\n  const [persons, setPersons] = useState([])\n  const [contactData, setContactData] = useState({\n    name: '',\n    number: '',\n  })\n  const [searchText, setSearchText] = useState('')\n  const [searchResults, setSearchResults] = useState([])\n  const [notification, setNotification] = useState(null)\n\n  // #region local variables\n  let existingContact\n  //#endregion\n\n  // #region other functions\n  const isDuplicateContact = (obj1, obj2) => {\n    if (obj1.name.toLowerCase() === obj2.name.toLowerCase()) {\n      existingContact = obj1\n      return true\n    }\n    return false\n  }\n\n  //#endregion\n\n  // #region event handlers\n  const handleSearchInput = (event) => {\n    setSearchText(event.target.value)\n  }\n\n  const handleContactInput = (event) => {\n    setContactData({ ...contactData, [event.target.name]: event.target.value })\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const contact = {\n      name: contactData.name,\n      number: contactData.number,\n    }\n\n    const alreadyExists = persons.some((person) =>\n      isDuplicateContact(person, contact)\n    )\n\n    if (alreadyExists) {\n      if (\n        window.confirm(\n          `${existingContact.name} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const updatedContact = {\n          ...contact,\n          number: contactData.number,\n        }\n        contactServices\n          .update(existingContact.id, updatedContact)\n          .then((contact) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== existingContact.id ? person : contact\n              )\n            )\n            return contact\n          })\n          .then((contact) =>\n            setNotification({\n              message: `Updated number for ${contact.name}`,\n              type: 'success',\n            })\n          )\n          .catch((error) =>\n            setNotification({\n              message: error.response.data.message,\n              type: 'error',\n            })\n          )\n      }\n    } else {\n      contactServices\n        .create(contact)\n        .then((newContact) => {\n          setPersons(persons.concat(newContact))\n        })\n        .then(() =>\n          setNotification({\n            message: `Added ${contact.name}`,\n            type: 'success',\n          })\n        )\n        .catch((error) => {\n          console.log(error)\n          setNotification({\n            message: error.response.data.error,\n            type: 'error',\n          })\n        })\n    }\n\n    Object.getOwnPropertyNames(contactData).forEach(\n      (prop) => (contactData[prop] = '')\n    )\n  }\n\n  const deleteContact = (id) => {\n    const person = persons.find((person) => person.id === id)\n    if (window.confirm(`Delete ${person.name}`))\n      contactServices\n        .deleteContact(id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== id))\n          setNotification({\n            message: `Removed ${person.name}`,\n            type: 'alert',\n          })\n        })\n        .catch(() =>\n          setNotification({\n            message: `Information of ${person.name} has already been removed from the server.`,\n            type: 'error',\n          })\n        )\n  }\n\n  //#endregion\n\n  // #region side effects\n\n  useEffect(() => {\n    contactServices.getAll().then((allContacts) => setPersons(allContacts))\n  }, [])\n\n  // updating the search results\n  useEffect(() => {\n    const regex = new RegExp(searchText, 'i')\n    setSearchResults(\n      searchText ? persons.filter((person) => regex.test(person.name)) : persons\n    )\n  }, [searchText, persons])\n\n  //clearing out displayed notification\n  useEffect(() => {\n    setTimeout(() => setNotification(null), 5000)\n  }, [notification])\n\n  //#endregion\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <ContactSearch handleInput={handleSearchInput} />\n      <h3>add a new</h3>\n      <ContactNew\n        handleSubmit={handleSubmit}\n        handleContactInput={handleContactInput}\n        contactData={contactData}\n      />\n      <ContactList list={searchResults} delete={deleteContact} />\n    </div>\n  )\n}\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}