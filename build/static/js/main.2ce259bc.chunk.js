(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(18),r=n.n(c),a=n(8),o=n(4),u=n(3),i=n(1),s=n(0),d=function(e){return Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{type:"text",onChange:function(t){return e.handleInput(t)}})]})},b=function(e){return Object(s.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{type:"text",onChange:e.handleContactInput,value:e.contactData.name,name:"name"})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{type:"tel",onChange:e.handleContactInput,value:e.contactData.number,name:"number"})]}),Object(s.jsx)("button",{type:"submit",children:"add"})]})},l=function(e){return Object(s.jsxs)("div",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:e.delete,children:"delete"})]})},f=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Numbers"}),e.list.map((function(t){return Object(s.jsx)(l,{name:t.name,number:t.number,delete:function(){return e.delete(t.id)}},t.id)}))]})},j=n(5),m=n.n(j),h="/api/persons",p={getAll:function(){return m.a.get(h).then((function(e){return e.data}))},create:function(e){return m.a.post(h,e).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},deleteContact:function(e){return m.a.delete("".concat(h,"/").concat(e))}},O=function(e){var t=e.notification;if(null===t)return null;var n=t.message,c=t.type;return null===n?null:Object(s.jsx)("div",{style:"success"===c?{color:"green",background:"lightgrey",border:"5px solid",borderRadius:5,padding:10,fontSize:20,marginBottom:15}:{color:"red",background:"lightgrey",border:"5px solid",borderRadius:5,padding:10,fontSize:20,marginBottom:15},children:n})},g=function(){var e,t=Object(i.useState)([]),n=Object(u.a)(t,2),c=n[0],r=n[1],l=Object(i.useState)({name:"",number:""}),j=Object(u.a)(l,2),m=j[0],h=j[1],g=Object(i.useState)(""),x=Object(u.a)(g,2),v=x[0],y=x[1],w=Object(i.useState)([]),C=Object(u.a)(w,2),S=C[0],k=C[1],I=Object(i.useState)(null),E=Object(u.a)(I,2),D=E[0],R=E[1];return Object(i.useEffect)((function(){p.getAll().then((function(e){return r(e)}))}),[]),Object(i.useEffect)((function(){var e=new RegExp(v,"i");k(v?c.filter((function(t){return e.test(t.name)})):c)}),[v,c]),Object(i.useEffect)((function(){setTimeout((function(){return R(null)}),5e3)}),[D]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{notification:D}),Object(s.jsx)(d,{handleInput:function(e){y(e.target.value)}}),Object(s.jsx)("h3",{children:"add a new"}),Object(s.jsx)(b,{handleSubmit:function(t){t.preventDefault();var n={name:m.name,number:m.number};if(c.some((function(t){return r=n,(c=t).name.toLowerCase()===r.name.toLowerCase()&&(e=c,!0);var c,r}))){if(window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with a new one?"))){var a=Object(o.a)(Object(o.a)({},n),{},{number:m.number});p.update(e.id,a).then((function(t){return r(c.map((function(n){return n.id!==e.id?n:t}))),t})).then((function(e){return R({message:"Updated number for ".concat(e.name),type:"success"})}))}}else p.create(n).then((function(e){r(c.concat(e))})).then((function(){return R({message:"Added ".concat(n.name),type:"success"})}));Object.getOwnPropertyNames(m).forEach((function(e){return m[e]=""}))},handleContactInput:function(e){h(Object(o.a)(Object(o.a)({},m),{},Object(a.a)({},e.target.name,e.target.value)))},contactData:m}),Object(s.jsx)(f,{list:S,delete:function(e){var t=c.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name))&&p.deleteContact(e).then((function(){r(c.filter((function(t){return t.id!==e}))),R({message:"Removed ".concat(t.name),type:"alert"})})).catch((function(){return R({message:"Information of ".concat(t.name," has already been removed from the server."),type:"error"})}))}})]})};n(42);r.a.render(Object(s.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.2ce259bc.chunk.js.map